var vectorTile=(()=>{var f=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports);var g=f((U,M)=>{"use strict";M.exports=y;function y(t,i){this.x=t,this.y=i}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,i){return this.clone()._rotateAround(t,i)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var i=t.x-this.x,e=t.y-this.y;return i*i+e*e},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,i){return Math.atan2(this.x*i-this.y*t,this.x*t+this.y*i)},_matMult:function(t){var i=t[0]*this.x+t[1]*this.y,e=t[2]*this.x+t[3]*this.y;return this.x=i,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var i=Math.cos(t),e=Math.sin(t),n=i*this.x-e*this.y,s=e*this.x+i*this.y;return this.x=n,this.y=s,this},_rotateAround:function(t,i){var e=Math.cos(t),n=Math.sin(t),s=i.x+e*(this.x-i.x)-n*(this.y-i.y),o=i.y+n*(this.x-i.x)+e*(this.y-i.y);return this.x=s,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};y.convert=function(t){return t instanceof y?t:Array.isArray(t)?new y(t[0],t[1]):t}});var v=f((C,S)=>{"use strict";var B=g();S.exports=l;function l(t,i,e,n,s){this.properties={},this.extent=e,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=s,t.readFields(A,this,i)}function A(t,i,e){t==1?i.id=e.readVarint():t==2?I(e,i):t==3?i.type=e.readVarint():t==4&&(i._geometry=e.pos)}function I(t,i){for(var e=t.readVarint()+t.pos;t.pos<e;){var n=i._keys[t.readVarint()],s=i._values[t.readVarint()];i.properties[n]=s}}l.types=["Unknown","Point","LineString","Polygon"];l.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var i=t.readVarint()+t.pos,e=1,n=0,s=0,o=0,r=[],u;t.pos<i;){if(n<=0){var h=t.readVarint();e=h&7,n=h>>3}if(n--,e===1||e===2)s+=t.readSVarint(),o+=t.readSVarint(),e===1&&(u&&r.push(u),u=[]),u.push(new B(s,o));else if(e===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+e)}return u&&r.push(u),r};l.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var i=t.readVarint()+t.pos,e=1,n=0,s=0,o=0,r=1/0,u=-1/0,h=1/0,a=-1/0;t.pos<i;){if(n<=0){var c=t.readVarint();e=c&7,n=c>>3}if(n--,e===1||e===2)s+=t.readSVarint(),o+=t.readSVarint(),s<r&&(r=s),s>u&&(u=s),o<h&&(h=o),o>a&&(a=o);else if(e!==7)throw new Error("unknown command "+e)}return[r,h,u,a]};l.prototype.toGeoJSON=function(t,i,e){var n=this.extent*Math.pow(2,e),s=this.extent*t,o=this.extent*i,r=this.loadGeometry(),u=l.types[this.type],h,a;function c(_){for(var d=0;d<_.length;d++){var w=_[d],F=180-(w.y+o)*360/n;_[d]=[(w.x+s)*360/n-180,360/Math.PI*Math.atan(Math.exp(F*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(h=0;h<r.length;h++)V[h]=r[h][0];r=V,c(r);break;case 2:for(h=0;h<r.length;h++)c(r[h]);break;case 3:for(r=E(r),h=0;h<r.length;h++)for(a=0;a<r[h].length;a++)c(r[h][a]);break}r.length===1?r=r[0]:u="Multi"+u;var m={type:"Feature",geometry:{type:u,coordinates:r},properties:this.properties};return"id"in this&&(m.id=this.id),m};function E(t){var i=t.length;if(i<=1)return[t];for(var e=[],n,s,o=0;o<i;o++){var r=G(t[o]);r!==0&&(s===void 0&&(s=r<0),s===r<0?(n&&e.push(n),n=[t[o]]):n.push(t[o]))}return n&&e.push(n),e}function G(t){for(var i=0,e=0,n=t.length,s=n-1,o,r;e<n;s=e++)o=t[e],r=t[s],i+=(r.x-o.x)*(o.y+r.y);return i}});var p=f((H,q)=>{"use strict";var L=v();q.exports=P;function P(t,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(W,this,i),this.length=this._features.length}function W(t,i,e){t===15?i.version=e.readVarint():t===1?i.name=e.readString():t===5?i.extent=e.readVarint():t===2?i._features.push(e.pos):t===3?i._keys.push(e.readString()):t===4&&i._values.push(z(e))}function z(t){for(var i=null,e=t.readVarint()+t.pos;t.pos<e;){var n=t.readVarint()>>3;i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null}return i}P.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var i=this._pbf.readVarint()+this._pbf.pos;return new L(this._pbf,i,this.extent,this._keys,this._values)}});var k=f((K,T)=>{"use strict";var D=p();T.exports=J;function J(t,i){this.layers=t.readFields(N,{},i)}function N(t,i,e){if(t===3){var n=new D(e,e.readVarint()+e.pos);n.length&&(i[n.name]=n)}}});var O=f((Q,x)=>{x.exports.VectorTile=k();x.exports.VectorTileFeature=v();x.exports.VectorTileLayer=p()});return O();})();
